# app.py
import random
import streamlit as st

# -----------------------------
# 0) í˜ì´ì§€ ì„¤ì •
# -----------------------------
st.set_page_config(
    page_title="ì¿¨ë¼ì›Œ ê½ƒ ì„±í–¥ í…ŒìŠ¤íŠ¸",
    page_icon="ğŸŒ¸",
    layout="centered"
)

# -----------------------------
# 1) ê²°ê³¼(ê½ƒ) ì •ì˜ + ì´ë¯¸ì§€ ê²½ë¡œ(ë˜ëŠ” URL)
#    - images/ í´ë”ì— íŒŒì¼ì„ ë„£ìœ¼ë©´ ë¡œì»¬ ê²½ë¡œë¡œ í‘œì‹œë¨
#    - ì˜ˆ: images/daisy.png
# -----------------------------
FLOWERS = {
    "DAISY": {
        "name": "ë°ì´ì§€",
        "emoji": "ğŸŒ¼",
        "desc": "ì¹œëª© ì—ë„ˆì§€ ë§Œë ™! ì²˜ìŒ ë§Œë‚œ ì‚¬ëŒë„ ê¸ˆë°© ì›ƒê²Œ ë§Œë“œëŠ” **ë¶„ìœ„ê¸° ë©”ì´ì»¤ ì„ ë°°** íƒ€ì….",
        "role": "ì˜¤ëŠ˜ ë„ˆì˜ ì¶”ì²œ í¬ì§€ì…˜: **í˜„ì¥ ë¶„ìœ„ê¸° & ì•„ì´ìŠ¤ë¸Œë ˆì´í‚¹**",
        "image": "images/daisy.jpg",
    },
    "FORGET": {
        "name": "ë¬¼ë§ì´ˆ",
        "emoji": "ğŸ’™",
        "desc": "ì¡°ìš©íˆ ìŠ¤ë©°ë“¤ì–´ 1:1 ëŒ€í™”ë¡œ ë§ˆìŒì„ ì—¬ëŠ” **ê°ì„± ì¼€ì–´ ì„ ë°°** íƒ€ì….",
        "role": "ì˜¤ëŠ˜ ë„ˆì˜ ì¶”ì²œ í¬ì§€ì…˜: **ìƒˆë‚´ê¸° ì˜†ìë¦¬ ì•‰ì•„ì„œ í¸í•˜ê²Œ í•´ì£¼ê¸°**",
        "image": "images/forgetmenot.jpg",
    },
    "DELPH": {
        "name": "ë¸í”¼ëŠ„",
        "emoji": "ğŸ’ ",
        "desc": "í–‰ì‚¬/ì¼ì •/ë™ì„ ì„ ì •ë¦¬í•˜ë©° íŒì„ ê¹”ì•„ì£¼ëŠ” **ê¸°íš ë¦¬ë“œ ì„ ë°°** íƒ€ì….",
        "role": "ì˜¤ëŠ˜ ë„ˆì˜ ì¶”ì²œ í¬ì§€ì…˜: **ë™ì„ /ì—­í•  ë¶„ë°° & ì§„í–‰**",
        "image": "images/delphinium.jpg",
    },
    "LAV": {
        "name": "ë¼ë²¤ë”",
        "emoji": "ğŸ’œ",
        "desc": "ë’¤ì—ì„œ ì•ˆì •ê° ìˆê²Œ ë°›ì³ì£¼ê³  ì‚¬ëŒì„ ì±™ê¸°ëŠ” **ìš´ì˜Â·ì¼€ì–´ ì„ ë°°** íƒ€ì….",
        "role": "ì˜¤ëŠ˜ ë„ˆì˜ ì¶”ì²œ í¬ì§€ì…˜: **ë¬¼í’ˆ/ì •ë¦¬/ì„œí¬íŠ¸ & ë©˜íƒˆì¼€ì–´**",
        "image": "images/lavender.jpg",
    },
    "ROSE": {
        "name": "ì¥ë¯¸",
        "emoji": "ğŸŒ¹",
        "desc": "í˜¸ê° ìƒê¸°ë©´ ìì—°ìŠ¤ëŸ½ê²Œ ì„¤ë ˜ì„ ë§Œë“œëŠ” **í”ŒëŸ¬íŒ… ì§ì§„ ì„ ë°°** íƒ€ì….",
        "role": "ì˜¤ëŠ˜ ë„ˆì˜ ì¶”ì²œ í¬ì§€ì…˜: **â€˜í•œ ëª…â€™ê³¼ ì¹œí•´ì§€ê¸° ë¯¸ì…˜ ìˆ˜í–‰**",
        "image": "images/rose.jpg",
    },
    "SUN": {
        "name": "í•´ë°”ë¼ê¸°",
        "emoji": "ğŸŒ»",
        "desc": "ì¶”ì–µì„ ì˜ˆì˜ê²Œ ë‚¨ê¸°ê³  í™ë³´ë¡œ í™•ì‚°ì‹œí‚¤ëŠ” **ì½˜í…ì¸ Â·ê¸°ë¡ ì„ ë°°** íƒ€ì….",
        "role": "ì˜¤ëŠ˜ ë„ˆì˜ ì¶”ì²œ í¬ì§€ì…˜: **ì‚¬ì§„/ì˜ìƒ/ìŠ¤í† ë¦¬ ì—…ë¡œë“œ ë‹´ë‹¹**",
        "image": "images/sunflower.jpg",
    },
}

# -----------------------------
# 2) ì§ˆë¬¸(ë²„íŠ¼í˜•) ì •ì˜ - ì„¤ë ˜/í™œë™ ê¸°ëŒ€ê° ë²„ì „
#    choice_key: A/B/C/D
# -----------------------------
QUESTIONS = [
    {
        "q": "ì²« ë™ì•„ë¦¬ ëª¨ì„, ì´ëŸ° ì„ ë°°ê°€ ìˆìœ¼ë©´ ë§ˆìŒì´ í’€ë¦°ë‹¤",
        "opts": {
            "A": "ì²˜ìŒ ë³´ëŠ” í›„ë°°ë“¤í•œí…Œ ë¨¼ì € ë§ ê±¸ì–´ì£¼ë©° ìì—°ìŠ¤ëŸ½ê²Œ ì›ƒê²Œ ë§Œë“œëŠ” ì„ ë°°",
            "B": "ì˜†ì— ì•‰ì•„ì„œ â€œê´œì°®ì•„?â€ í•˜ê³  ì¡°ìš©íˆ ì±™ê²¨ì£¼ëŠ” ì„ ë°°",
            "C": "ë§ì€ ì ì§€ë§Œ ì „ì²´ ë¶„ìœ„ê¸°ë‘ ì‚¬ëŒë“¤ ë‹¤ íŒŒì•…í•˜ê³  ìˆëŠ” ì„ ë°°",
            "D": "â€œì˜¤ëŠ˜ ì¼ì •ì€ ì´ë ‡ê²Œ ê°€ìâ€ í•˜ë©° íë¦„ ì¡ì•„ì£¼ëŠ” ì„ ë°°",
        },
    },
    {
        "q": "ì¿¨ë¼ì›Œ MT, ì œì¼ ê¸°ëŒ€ë˜ëŠ” ì¥ë©´ì€?",
        "opts": {
            "A": "ë°¤ê³µê¸° ì†ì—ì„œ ê´œíˆ ëˆˆ ë§ˆì£¼ì¹˜ê³  ì¸ ê¸°ë¥˜ ë„ëŠ” ìˆœê°„",
            "B": "ë‹¤ ê°™ì´ ê²Œì„í•˜ë‹¤ê°€ ì›ƒëŠë¼ ì •ì‹  ì—†ëŠ” ì‹œê°„",
            "C": "ìˆ ìë¦¬ ëë‚˜ê³  ë‘˜ë§Œ ë‚¨ì•„ì„œ ì§„í•œ ì–˜ê¸°í•˜ëŠ” ìˆœê°„",
            "D": "ì¼ì • ë”± ë§ê²Œ êµ´ëŸ¬ê°€ì„œ â€œì´ë²ˆ MT ì˜ëë‹¤â€ ì†Œë¦¬ ë‚˜ì˜¬ ë•Œ",
        },
    },
    {
        "q": "ê½ƒì‹œì¥Â·ë¶€ì§€ ê¾¸ë¯¸ê¸° ê°™ì€ í™œë™ì´ ìˆë‹¤ë©´, ì´ëŸ° ì‚¬ëŒì´ ë©‹ìˆë‹¤",
        "opts": {
            "A": "â€œì´ ì»¨ì…‰ ì–´ë•Œ?â€ í•˜ë©´ì„œ ë¶„ìœ„ê¸° í™• ë°”ê¾¸ëŠ” ì•„ì´ë””ì–´ ë‚´ëŠ” ì‚¬ëŒ",
            "B": "ì‚¬ëŒë“¤ ëª¨ì•„ì„œ ì—­í•  ë‚˜ëˆ„ê³  í˜„ì¥ ë¶„ìœ„ê¸° ì¡ëŠ” ì‚¬ëŒ",
            "C": "ë§ ì—†ì´ ì† ë¹ ë¥´ê²Œ ì›€ì§ì´ë©´ì„œ ê²°ê³¼ ë§Œë“¤ì–´ë‚´ëŠ” ì‚¬ëŒ",
            "D": "ì‚¬ì§„Â·ì˜ìƒ ì˜ˆì˜ê²Œ ë‚¨ê²¨ì„œ ì¶”ì–µ ë§Œë“¤ì–´ì£¼ëŠ” ì‚¬ëŒ",
        },
    },
    {
        "q": "ë²šê½ƒ ì‹œì¦Œ, ì¿¨ë¼ì›Œ ê½ƒë†€ì´ ê°„ë‹¤ë©´ ê°€ì¥ ì„¤ë ˆëŠ” ê±´?",
        "opts": {
            "A": "ì¸ìƒìƒ· ê±´ì ¸ì„œ ë‹¤ ê°™ì´ SNS ì˜¬ë¦¬ëŠ” ìˆœê°„",
            "B": "ë¬´ë¦¬ ì§€ì–´ì„œ ëŒì•„ë‹¤ë‹ˆë©° ì›ƒê³  ë– ë“œëŠ” ë¶„ìœ„ê¸°",
            "C": "ë§ˆìŒ ë§ëŠ” í•œ ì‚¬ëŒì´ë‘ ì¡°ìš©íˆ ê±·ëŠ” ì‹œê°„",
            "D": "ë™ì„ Â·ë§›ì§‘ ì™„ë²½í•´ì„œ â€œì—­ì‹œ ì¤€ë¹„ëœ ì‚¬ëŒâ€ ì†Œë¦¬ ë“£ëŠ” ìˆœê°„",
        },
    },
    {
        "q": "ì¶•ì œ ë¶€ìŠ¤ ìš´ì˜ ì¤‘, ê°€ì¥ ë“ ë“ í•œ ìœ í˜•ì€?",
        "opts": {
            "A": "ì§€ë‚˜ê°€ëŠ” ì‚¬ëŒë“¤ ìì—°ìŠ¤ëŸ½ê²Œ ëŒì–´ì˜¤ëŠ” ì„ ë°°",
            "B": "í˜„ì¥ ë¶„ìœ„ê¸° ê´€ë¦¬ & ì¹œí™”ë ¥ ë§Œë ™ì¸ ì„ ë°°",
            "C": "ê³„ì‚°Â·ì •ë¦¬Â·ë¬¼í’ˆ í•˜ë‚˜ë„ ì•ˆ ë†“ì¹˜ëŠ” ì„ ë°°",
            "D": "ì„¤ëª…Â·ë©˜íŠ¸ ì„¼ìŠ¤ ì¢‹ì•„ì„œ ê¸°ì–µì— ë‚¨ëŠ” ì„ ë°°",
        },
    },
    {
        "q": "ì¿¨ë¼ì›Œ í™œë™ ì¤‘, ì´ëŸ° ìˆœê°„ì— ì‹¬ì¿µí•œë‹¤",
        "opts": {
            "A": "â€œë„ˆ ë•ë¶„ì— ë¶„ìœ„ê¸° ì‚´ì•˜ë‹¤â€ëŠ” ë§ ë“¤ì„ ë•Œ",
            "B": "í™œë™ ëë‚˜ê³  ë‹¤ ê°™ì´ ì¹œí•´ì¡Œë‹¤ëŠ” ê²Œ ëŠê»´ì§ˆ ë•Œ",
            "C": "ëˆ„êµ°ê°€ë‘ ê¹Šì€ ì–˜ê¸° ë‚˜ëˆ„ê³  ë§ˆìŒ ì—´ë ¸ì„ ë•Œ",
            "D": "í•˜ë‚˜ì˜ í™œë™ì´ ì™„ë²½í•˜ê²Œ ë§ˆë¬´ë¦¬ëì„ ë•Œ",
        },
    },
    {
        "q": "ë™ì•„ë¦¬ì—ì„œ í˜¸ê° ê°€ëŠ” ì‚¬ëŒì´ ìƒê²¼ë‹¤ë©´?",
        "opts": {
            "A": "ì€ê·¼ í‹° ë‚˜ê²Œ í”ŒëŸ¬íŒ…í•˜ë©´ì„œ ì„¤ë ˜ ì£¼ëŠ” ìŠ¤íƒ€ì¼",
            "B": "ë¨¼ì € ì¹œí•´ì§€ê³  ìì—°ìŠ¤ëŸ½ê²Œ ê±°ë¦¬ ì¢íˆëŠ” ìŠ¤íƒ€ì¼",
            "C": "ìƒëŒ€ê°€ í™•ì‹¤íˆ ë‹¤ê°€ì˜¬ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ” ìŠ¤íƒ€ì¼",
            "D": "ì—°ì• ë³´ë‹¤ ì§€ê¸ˆì€ ë™ì•„ë¦¬ í™œë™ì— ë” ì§‘ì¤‘í•˜ëŠ” ìŠ¤íƒ€ì¼",
        },
    },
    {
        "q": "ì¢…ê°• ì¦ˆìŒ, â€œì¿¨ë¼ì›Œ ë“¤ì–´ì˜¤ê¸¸ ì˜í–ˆë‹¤â€ë¼ê³  ëŠë¼ëŠ” ìˆœê°„ì€?",
        "opts": {
            "A": "ì‚¬ëŒë“¤ì´ ë‚˜ë¥¼ ë¶„ìœ„ê¸° ë©”ì´ì»¤ë¡œ ê¸°ì–µí•´ì¤„ ë•Œ",
            "B": "ì—¬ê¸° ì™€ì„œ ì§„ì§œ ì¹œí•œ ì‚¬ëŒë“¤ì´ ìƒê²¼ì„ ë•Œ",
            "C": "ëˆ„êµ°ê°€ì—ê²Œ íŠ¹ë³„í•œ ê¸°ì–µìœ¼ë¡œ ë‚¨ì•˜ë‹¤ê³  ëŠë‚„ ë•Œ",
            "D": "ë‚´ê°€ ì°¸ì—¬í•œ í™œë™ë“¤ì´ ë‹¤ ì„±ê³µì ìœ¼ë¡œ ëë‚¬ì„ ë•Œ",
        },
    },
]

# -----------------------------
# 3) ê°€ì¤‘ì¹˜ í…Œì´ë¸”
#    - ì§ˆë¬¸ ì¸ë±ìŠ¤ -> ì„ íƒì§€ -> {ê½ƒ: ì ìˆ˜}
#    - ì•„ë˜ëŠ” â€œì•ˆì •ì ì¸ ë¶„ì‚°â€ì´ ë‚˜ë„ë¡ ì„¤ê³„ëœ ê¸°ë³¸ê°’(íŠœë‹ ê°€ëŠ¥)
# -----------------------------
S = {
    0: {  # Q1
        "A": {"DAISY": 3, "ROSE": 1},
        "B": {"FORGET": 2, "LAV": 1},
        "C": {"LAV": 2, "DELPH": 1},
        "D": {"DELPH": 2, "SUN": 1},
    },
    1: {  # Q2
        "A": {"ROSE": 3, "FORGET": 1},
        "B": {"DAISY": 3},
        "C": {"FORGET": 3, "LAV": 1},
        "D": {"DELPH": 2, "LAV": 2},
    },
    2: {  # Q3
        "A": {"DELPH": 2, "SUN": 1},
        "B": {"DAISY": 2, "DELPH": 1},
        "C": {"LAV": 3},
        "D": {"SUN": 3},
    },
    3: {  # Q4
        "A": {"SUN": 3},
        "B": {"DAISY": 2, "SUN": 1},
        "C": {"FORGET": 2, "ROSE": 1},
        "D": {"DELPH": 2, "LAV": 1},
    },
    4: {  # Q5
        "A": {"DAISY": 2, "ROSE": 1},
        "B": {"DAISY": 3, "LAV": 1},
        "C": {"LAV": 3},
        "D": {"SUN": 2, "DELPH": 1},
    },
    5: {  # Q6
        "A": {"DAISY": 2, "ROSE": 1},
        "B": {"DAISY": 3, "LAV": 1},
        "C": {"FORGET": 3},
        "D": {"DELPH": 2, "LAV": 2},
    },
    6: {  # Q7
        "A": {"ROSE": 3},
        "B": {"ROSE": 2, "FORGET": 1},
        "C": {"FORGET": 2, "LAV": 1},
        "D": {"DELPH": 2, "LAV": 1},
    },
    7: {  # Q8 (ê²°ì • ì§ˆë¬¸ ì—­í• : ë™ì  ì¤„ì´ê¸°)
        "A": {"DAISY": 3},
        "B": {"LAV": 2, "DAISY": 1},
        "C": {"ROSE": 2, "FORGET": 1},
        "D": {"DELPH": 3},
    },
}

def compute_scores(answers):
    scores = {k: 0 for k in FLOWERS.keys()}
    for qi, ch in enumerate(answers):
        for flower, pts in S[qi][ch].items():
            scores[flower] += pts
    return scores

def pick_winner(scores, last_choice):
    """ë™ì  ì²˜ë¦¬:
       1) ë§ˆì§€ë§‰ ì§ˆë¬¸(Q8)ì˜ ê¸°ì—¬ ì ìˆ˜ í° ìª½ ìš°ì„ 
       2) ê·¸ë˜ë„ ë™ì ì´ë©´ ëœë¤
    """
    max_score = max(scores.values())
    cand = [k for k, v in scores.items() if v == max_score]
    if len(cand) == 1:
        return cand[0]

    # tie-break by Q8 bonus (answers[-1] == last_choice)
    q8 = S[len(QUESTIONS) - 1].get(last_choice, {})
    bonus = {k: q8.get(k, 0) for k in cand}
    best = max(bonus.values())
    cand2 = [k for k, b in bonus.items() if b == best]
    return random.choice(cand2)

def safe_show_image(path_or_url, caption=None):
    """ì´ë¯¸ì§€ íŒŒì¼ì´ ì—†ê±°ë‚˜ ë¡œë”© ì‹¤íŒ¨í•´ë„ ì•±ì´ ì•ˆ ê¹¨ì§€ê²Œ."""
    try:
        st.image(path_or_url, caption=caption, use_container_width=True)
    except Exception:
        # fallback: ì´ë¯¸ì§€ ëŒ€ì‹  í…ìŠ¤íŠ¸
        st.info("ì´ë¯¸ì§€ ì¤€ë¹„ ì¤‘ì´ì—ìš” ğŸŒ¸ (images/ í´ë”ì— íŒŒì¼ì„ ë„£ìœ¼ë©´ í‘œì‹œë©ë‹ˆë‹¤!)")

# -----------------------------
# 4) ì„¸ì…˜ ìƒíƒœ ì´ˆê¸°í™”
# -----------------------------
if "q_idx" not in st.session_state:
    st.session_state.q_idx = 0
    st.session_state.answers = []  # ["A","C",...]
    st.session_state.done = False
    st.session_state.result = None
    st.session_state.scores = None

def reset():
    st.session_state.q_idx = 0
    st.session_state.answers = []
    st.session_state.done = False
    st.session_state.result = None
    st.session_state.scores = None

# -----------------------------
# 5) í—¤ë”
# -----------------------------
st.title("ğŸŒ¸ ì¿¨ë¼ì›Œ ê½ƒ ì„±í–¥ í…ŒìŠ¤íŠ¸")
st.caption("ì—°ì•  + ì¹œëª© + í™œë™ ì·¨í–¥ìœ¼ë¡œ ì•Œì•„ë³´ëŠ” ë‚˜ì˜ ê½ƒ íƒ€ì… (ì•½ 1ë¶„)")

# -----------------------------
# 6) ê²°ê³¼ í™”ë©´
# -----------------------------
if st.session_state.done and st.session_state.result:
    key = st.session_state.result
    info = FLOWERS[key]

    st.subheader(f"{info['emoji']} ë‹¹ì‹ ì˜ ê½ƒì€ **{info['name']}**!")
    safe_show_image(info["image"], caption=f"{info['name']} íƒ€ì…")

    st.write(info["desc"])
    st.write(f"âœ… {info['role']}")

    # 2ë“±ë„ ê°™ì´ ë³´ì—¬ì£¼ë©´ ì¬ë¯¸/ê³µìœ ê°€ ëŠ˜ì–´ë‚¨
    sorted_scores = sorted(st.session_state.scores.items(), key=lambda x: -x[1])
    second = sorted_scores[1][0] if len(sorted_scores) > 1 else None
    if second:
        st.markdown(f"ë³´ë„ˆìŠ¤: ë„ˆë‘ ì˜ ë§ëŠ” ì„œë¸Œ íƒ€ì…ì€ **{FLOWERS[second]['name']}** {FLOWERS[second]['emoji']}")

    st.divider()
    col1, col2 = st.columns(2)
    with col1:
        if st.button("ğŸ” ë‹¤ì‹œí•˜ê¸°", use_container_width=True):
            reset()
            st.rerun()
    with col2:
        # ê³µìœ ëŠ” ì‹¤ì œë¡œëŠ” ë§í¬ ê³µìœ ê°€ ì œì¼ ê°•í•¨(ë¶€ìŠ¤ë¼ë©´ QR ì˜†ì— ê³µìœ  ìœ ë„ ë¬¸êµ¬)
        st.button("ğŸ“Œ ê²°ê³¼ ìº¡ì²˜í•˜ê¸°", use_container_width=True, disabled=True)
        st.caption("í°ìœ¼ë¡œ ê²°ê³¼ í™”ë©´ ìº¡ì²˜í•´ì„œ ì¹œêµ¬í•œí…Œ ë³´ë‚´ê¸°!")

    # ë””ë²„ê·¸/ìš´ì˜ í™•ì¸ìš©(ì›í•˜ë©´ êº¼ë„ ë¨)
    with st.expander("ë‚´ ì ìˆ˜ ë³´ê¸°(ìš´ì˜/íŠœë‹ìš©)"):
        st.write({FLOWERS[k]["name"]: v for k, v in sorted_scores})

    st.stop()

# -----------------------------
# 7) ì§ˆë¬¸ í™”ë©´ (ë²„íŠ¼ ìŠ¤í…í¼)
# -----------------------------
q_total = len(QUESTIONS)
q_idx = st.session_state.q_idx

# ì§„í–‰ë¥ 
st.progress((q_idx) / q_total)

# ì§„í–‰ í‘œê¸°
st.markdown(f"**ì§„í–‰ë„: {q_idx + 1} / {q_total}**")

q_obj = QUESTIONS[q_idx]
st.subheader(f"Q{q_idx + 1}. {q_obj['q']}")

# ë³´ê¸° ë²„íŠ¼(ì¹´ë“œí˜• ëŠë‚Œ)
# ëª¨ë°”ì¼ì—ì„œ ëˆ„ë¥´ê¸° í¸í•˜ê²Œ ì „ì²´ í­ ë²„íŠ¼
for key, text in q_obj["opts"].items():
    if st.button(f"{key}. {text}", use_container_width=True):
        st.session_state.answers.append(key)
        st.session_state.q_idx += 1

        # ë§ˆì§€ë§‰ê¹Œì§€ ë‹µí–ˆìœ¼ë©´ ê²°ê³¼ ê³„ì‚°
        if st.session_state.q_idx >= q_total:
            scores = compute_scores(st.session_state.answers)
            winner = pick_winner(scores, st.session_state.answers[-1])

            st.session_state.scores = scores
            st.session_state.result = winner
            st.session_state.done = True

        st.rerun()

st.divider()

# ì•„ë˜ ì»¨íŠ¸ë¡¤: ë’¤ë¡œ/ë¦¬ì…‹
c1, c2 = st.columns(2)
with c1:
    if st.button("â¬…ï¸ ë’¤ë¡œ", use_container_width=True, disabled=(q_idx == 0)):
        # ë’¤ë¡œ ê°ˆ ë•Œ ë§ˆì§€ë§‰ ë‹µ ì œê±°
        if st.session_state.answers:
            st.session_state.answers.pop()
        st.session_state.q_idx = max(0, st.session_state.q_idx - 1)
        st.rerun()

with c2:
    if st.button("ğŸ—‘ï¸ ì²˜ìŒë¶€í„°", use_container_width=True):
        reset()
        st.rerun()

st.caption("ì¿¨ì¿¨ë ~ ğŸŒ¸")
